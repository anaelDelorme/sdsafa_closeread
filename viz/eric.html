<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Le classement 1855 – Dataviz de la SDSAFA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../logo.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-fc67fd86866a5a4a6dd290800ef50dd9.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/intersection-observer-polyfill-1.0.0/intersection-observer.js"></script>
<script src="../site_libs/quarto-contrib/scrollama-3.2.0/scrollama.min.js"></script>
<script src="../site_libs/quarto-contrib/closeread-0.1.0/closeread.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../site_libs/echarts4r-4.8.0/echarts-en.min.js"></script>
<script src="../site_libs/echarts4r-4.8.0/ecStat.min.js"></script>
<script src="../site_libs/echarts4r-4.8.0/dataTool.min.js"></script>
<script src="../site_libs/echarts4r-binding-0.4.5/echarts4r.js"></script>
<meta cr-debug-mode="false">
<meta cr-remove-header-space="false">


<link rel="stylesheet" href="../site_libs/quarto-contrib/quarto-project/qmd-lab/closeread/closeread.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Dataviz de la SDSAFA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-les-dataviz" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Les dataviz</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-les-dataviz">    
        <li>
    <a class="dropdown-item" href="../viz/bastien.html">
 <span class="dropdown-text">Road Trip 2023</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/benoit.html">
 <span class="dropdown-text">Rando Atlas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/claire.html">
 <span class="dropdown-text">Les traitements phytosanitaires</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/dominique.html">
 <span class="dropdown-text">Lebrun</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/eric.html">
 <span class="dropdown-text">Le classement 1855</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/laurence.html">
 <span class="dropdown-text">LE PARC NATIONAL KRUGER SOUTH AFRICA</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/lucie.html">
 <span class="dropdown-text">Les plantes de service</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/marie_anne.html">
 <span class="dropdown-text">Les ovins en 2022</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/marilene.html">
 <span class="dropdown-text">SPITZBERG TERRE DES OURS BLANCS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/maud.html">
 <span class="dropdown-text">Le don du sang : un acte de générosité</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/nathalie.html">
 <span class="dropdown-text">Montesquieu-Lauragais</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/noemie.html">
 <span class="dropdown-text">Voyage voyage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/pauline.html">
 <span class="dropdown-text">Aurecler</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/sylvie.html">
 <span class="dropdown-text">Les vacances de Sylvie</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../viz/vincent.html">
 <span class="dropdown-text">Viz Guyane</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">A propos</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Le classement 1855</h1>
</div>



<div class="quarto-title-meta column-page">

    
  
    
  </div>
  


</header>


<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-1855">
<div class="narrative">
<p>Le classement de 1855 a été établi en vue d’une présentation des vins de la Gironde, dans le cadre de l’Exposition Universelle de Paris, à la demande de l’Empereur <strong>NAPOLEON III.</strong></p>
</div>
</div>
<div class="trigger new-trigger" data-focus-on="cr-parcelles">
<div class="narrative">
<p><em>La rédaction du classement fut confiée, par la Chambre de Commerce de Bordeaux, au “Syndicat des Courtiers de Commerce” auprès de la Bourse de Bordeaux. Sa mission était d’officialiser une classification basée sur l’expérience de longues années et qui correspondait à la reconnaissance de la qualité du Terroir et à la notoriété de chaque cru. Les éléments furent puisés aux meilleures sources</em>.</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-1855" class="sticky">
<p><img src="./img/1855.PNG" class="img-fluid"></p>
</div>
<div id="cr-parcelles" class="sticky">
<p><img src="./img/image_parcelles_historiques.PNG" class="img-fluid"></p>
</div>
</div>
</div>
</div>
<div class="cr-section cr-column-screen sidebar-left">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-carte">
<div class="narrative">
<p>La carte des appelations</p>
</div>
</div>
<div class="trigger">
<div class="narrative">
<p><strong>Le classement comprend 5 grands crus dont 4 médoc</strong></p>
</div>
</div>
<div class="trigger">
<div class="cr-section cr-column-screen sidebar-left narrative">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-lafite_propriete">
<div class="narrative">
<p>Le chateau Lafite Rotschild, une proprieté du 18 eme siècle :</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-lafite_propriete" class="sticky">
<p><img src="./img/01-Lafite-Rothschild_propriete.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>
<div class="trigger">
<div class="cr-section cr-column-screen sidebar-left narrative">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-margaux_propriete">
<div class="narrative">
<p>Le chateau Margaux, le plus beau de tous</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-margaux_propriete" class="sticky">
<p><img src="./img/03-Chateau-Margaux_propriete.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>
<div class="trigger">
<div class="cr-section cr-column-screen sidebar-left narrative">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-latour_propriete">
<div class="narrative">
<p>Le chateau Latour au bord de la Gironde</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-latour_propriete" class="sticky">
<p><img src="./img/02-Latour_propriete.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>
<div class="trigger">
<div class="cr-section cr-column-screen sidebar-left narrative">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-mouton_propriete">
<div class="narrative">
<p>Le chateau Mouton, classé premier cru en 1973 grace à J. Chirac</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-mouton_propriete" class="sticky">
<p><img src="./img/04-Mouton-Rothschild_propriete.jpg" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>
<div class="trigger">
<div class="cr-section cr-column-screen sidebar-left narrative">
<div class="narrative-col">
<div class="trigger new-trigger" data-focus-on="cr-toto">
<div class="narrative">
<p>Les prix reflètent la qualité du millésime mais également la réussite propre a chaque domaine. Si Lafite est souvent le plus cher, pour le millésime 1990 c’est le château Margaux le plus couteux.</p>
</div>
</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-toto" class="sticky">
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-1542eb78e11b49a011e2" style="width:800px;height:500px;" class="echarts4r html-widget"></div>
<script type="application/json" data-for="htmlwidget-1542eb78e11b49a011e2">{"x":{"theme":"","tl":false,"draw":true,"renderer":"canvas","events":[],"buttons":[],"opts":{"yAxis":[{"show":true}],"xAxis":[{"data":["1980","1981","1982","1983","1984","1985","1986","1987","1988","1989","1990","1991","1992","1993","1994","1995","1996","1997","1998","1999","2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021","2022","2023"],"type":"category","boundaryGap":true}],"legend":{"data":["Margaux","Lafite","Latour"]},"series":[{"data":[{"value":["1980"," 319"]},{"value":["1981"," 462"]},{"value":["1982","1060"]},{"value":["1983"," 773"]},{"value":["1984"," 358"]},{"value":["1985"," 995"]},{"value":["1986"," 778"]},{"value":["1987"," 486"]},{"value":["1988"," 534"]},{"value":["1989"," 900"]},{"value":["1990","1432"]},{"value":["1991"," 413"]},{"value":["1992"," 349"]},{"value":["1993"," 394"]},{"value":["1994"," 496"]},{"value":["1995"," 668"]},{"value":["1996"," 867"]},{"value":["1997"," 538"]},{"value":["1998"," 562"]},{"value":["1999"," 554"]},{"value":["2000","1033"]},{"value":["2001"," 554"]},{"value":["2002"," 535"]},{"value":["2003"," 679"]},{"value":["2004"," 523"]},{"value":["2005"," 880"]},{"value":["2006"," 531"]},{"value":["2007"," 485"]},{"value":["2008"," 521"]},{"value":["2009"," 840"]},{"value":["2010"," 819"]},{"value":["2011"," 483"]},{"value":["2012"," 508"]},{"value":["2013"," 480"]},{"value":["2014"," 514"]},{"value":["2015","1378"]},{"value":["2016"," 654"]},{"value":["2017"," 485"]},{"value":["2018"," 650"]},{"value":["2019"," 665"]},{"value":["2020"," 609"]},{"value":["2021"," 525"]},{"value":["2022"," 674"]},{"value":["2023"," 442"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"Margaux","type":"line","coordinateSystem":"cartesian2d"},{"data":[{"value":["1980"," 596"]},{"value":["1981"," 650"]},{"value":["1982","3099"]},{"value":["1983"," 728"]},{"value":["1984"," 624"]},{"value":["1985"," 615"]},{"value":["1986","1015"]},{"value":["1987"," 618"]},{"value":["1988"," 850"]},{"value":["1989"," 923"]},{"value":["1990","1019"]},{"value":["1991"," 613"]},{"value":["1992"," 570"]},{"value":["1993"," 616"]},{"value":["1994"," 645"]},{"value":["1995"," 975"]},{"value":["1996"," 962"]},{"value":["1997"," 665"]},{"value":["1998"," 836"]},{"value":["1999"," 842"]},{"value":["2000","1481"]},{"value":["2001"," 738"]},{"value":["2002"," 705"]},{"value":["2003"," 990"]},{"value":["2004"," 792"]},{"value":["2005"," 991"]},{"value":["2006"," 786"]},{"value":["2007"," 746"]},{"value":["2008"," 853"]},{"value":["2009"," 974"]},{"value":["2010"," 991"]},{"value":["2011"," 695"]},{"value":["2012"," 748"]},{"value":["2013"," 715"]},{"value":["2014"," 724"]},{"value":["2015"," 757"]},{"value":["2016"," 817"]},{"value":["2017"," 678"]},{"value":["2018"," 786"]},{"value":["2019"," 676"]},{"value":["2020"," 657"]},{"value":["2021"," 593"]},{"value":["2022"," 728"]},{"value":["2023"," 498"]}],"yAxisIndex":0,"xAxisIndex":0,"name":"Lafite","type":"line","coordinateSystem":"cartesian2d"},{"data":[{"value":["1980"," 469"]},{"value":["1981"," 435"]},{"value":["1982","2082"]},{"value":["1983"," 502"]},{"value":["1984"," 470"]},{"value":["1985"," 540"]},{"value":["1986"," 589"]},{"value":["1987"," 408"]},{"value":["1988"," 585"]},{"value":["1989"," 628"]},{"value":["1990"," 937"]},{"value":["1991"," 459"]},{"value":["1992"," 480"]},{"value":["1993"," 458"]},{"value":["1994"," 500"]},{"value":["1995"," 608"]},{"value":["1996"," 761"]},{"value":["1997"," 527"]},{"value":["1998"," 569"]},{"value":["1999"," 605"]},{"value":["2000","1059"]},{"value":["2001"," 624"]},{"value":["2002"," 567"]},{"value":["2003"," 911"]},{"value":["2004"," 527"]},{"value":["2005"," 935"]},{"value":["2006"," 573"]},{"value":["2007"," 537"]},{"value":["2008"," 573"]},{"value":["2009","1172"]},{"value":["2010","1274"]},{"value":["2011"," 568"]},{"value":["2012"," 555"]},{"value":["2013"," 523"]},{"value":["2014"," 570"]},{"value":["2015"," 664"]},{"value":["2016",null]},{"value":["2017"," 512"]},{"value":["2018",null]},{"value":["2019",null]},{"value":["2020",null]},{"value":["2021",null]},{"value":["2022",null]},{"value":["2023",null]}],"yAxisIndex":0,"xAxisIndex":0,"name":"Latour","type":"line","coordinateSystem":"cartesian2d"}],"tooltip":{"trigger":"axis"}},"dispose":true},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="trigger">

</div>
<div class="trigger">

</div>
</div>
<div class="sticky-col">
<div class="sticky-col-stack">
<div id="cr-carte" class="sticky">

</div>
</div>
</div>
</div>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/anaelDelorme\.github\.io\/sdsafa_closeread\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>